**Backend-разработчик на Python.:snake:**  
## Спринт 10: Групповой проект. YaMDb и API для него.
**Описание**  
Проект YaMDb является базой данных по сбору отзывов пользователей на произведения.  
Произведения делятся на категории, такие как «Книги», «Фильмы», «Музыка». Список категорий может быть расширен, например, можно добавить категорию «Изобразительное искусство» или «Ювелирка», произведению может быть присвоен жанр из списка предустановленных, например, «Сказка», «Рок» или «Артхаус».  
Добавлять произведения, категории и жанры может только администратор. Пользователи оставляют к произведениям текстовые отзывы и ставят произведению оценку в диапазоне от одного до десяти, из пользовательских оценок формируется усреднённая оценка произведения — рейтинг. На одно произведение пользователь может оставить только один отзыв.Добавлять отзывы, комментарии и ставить оценки могут только аутентифицированные пользователи.  

**Версии:**  
- [Python 3.7.0](https://www.python.org/doc/) 
- [Django 2.2.16](https://docs.djangoproject.com/en/4.1/releases/2.2.16/)
- [Django REST framework 3.12.4](https://www.django-rest-framework.org/)
- [DRF Simple JWT 5.2](https://django-rest-framework-simplejwt.readthedocs.io/en/latest/)
- [Django Filter 21.1](https://django-filter.readthedocs.io/en/main/)

### Краткая история разработки  

**Документация API:**
В рамках данного проекта был реализован доступ к базе данных YaMDb только при помощи API, к которому есть документация по адресу **http://127.0.0.1:8000/redoc/**  

**Импорт CSV-файлов**  
Для проекта был написан скрипт с применением встроенной в Python библиотекой csv.  
Файл скрипта размещается в основной папке проекта, после чего необходимо запустить Django shell:  
`python manage.py shell`  
И выполнить команду:  
`>>> exec(open('csv_import_script.py').read())`  
Скрипт поддерживает все реализованные в проекте базы  данных и не требует никаких дополнительных параметров для своей работы.

#### Для начала необходимо клонировать репозиторий:
```
git clone git@github.com:Koloyojik/api_yamdb.git
```
##### Далее перейти в его папку:
```
cd api_yamdb
```
##### Создаем виртуальное окружение:
```
python -m venv venv
```
##### Активируем на *nix-системах:
```
source venv/bin/activate
```
##### Активируем на Windows системах:
```
source venv/Scripts/activate
```
##### Устанавливаем зависимости из файла requirements.txt:
```
pip install -r requirements.txt
```
##### Выполняем миграции в папке с файлом manage.py:
```
python manage.py migrate
```
##### Запускаем проект:
```
python manage.py runserver
```
##### Проект доступен по адресу:
```
http://127.0.0.1:8000
```
##### Админка:
```
http://127.0.0.1:8000/admin
```
---
#### Алгоритм регистрации пользователей
- Пользователь отправляет POST-запрос на добавление нового пользователя с параметрами email и username на эндпоинт /api/v1/auth/signup/.
- YaMDB отправляет письмо с кодом подтверждения (confirmation_code) на адрес email.
- Пользователь отправляет POST-запрос с параметрами username и confirmation_code на эндпоинт /api/v1/auth/token/, в ответе на запрос ему приходит token (JWT-токен).
- При желании пользователь отправляет PATCH-запрос на эндпоинт /api/v1/users/me/ и заполняет поля в своём профайле (описание полей — в документации).
#### Пользовательские роли
- Аноним — может просматривать описания произведений, читать отзывы и комментарии.
- Аутентифицированный пользователь (user) — может, как и Аноним, читать всё, дополнительно он может публиковать отзывы и ставить оценку произведениям (фильмам/книгам/песенкам), может комментировать чужие отзывы; может редактировать и удалять свои отзывы и комментарии. Эта роль присваивается по умолчанию каждому новому пользователю.
- Модератор (moderator) — те же права, что и у Аутентифицированного пользователя плюс право удалять любые отзывы и комментарии.
- Администратор (admin) — полные права на управление всем контентом проекта. Может создавать и удалять произведения, категории и жанры. Может назначать роли пользователям.
- Суперюзер Django — обладет правами администратора (admin)
### Регистрация и авторизация
#### Получить код подтверждения на переданный email.
- Права доступа: Доступно без токена.
- Использовать имя 'me' в качестве username запрещено.
- Поля email и username должны быть уникальными.

###### пример запроса:
```
http://127.0.0.1:8000/api/v1/auth/signup/
```
```
{
"email": "string",
"username": "string"
}
```
###### Пример ответа:
```
{
"email": "string",
"username": "string"
}
```
#### Reviews
#### Получение списка всех отзывов
- Получить список всех отзывов с помощью GET запроса
- Права доступа: Доступно без токена.
```
http://127.0.0.1:8000/api/v1/titles/{title_id}/reviews/
```
#### Добавление нового отзыва
- Добавить новый отзыв. Пользователь может оставить только один отзыв на произведение.
-  Права доступа: Аутентифицированные пользователи.
##### Пример POST запроса
```
{
"text": "string",
"score": 1
}
```
##### Пример ответа
```
{
"id": 0,
"text": "string",
"author": "string",
"score": 1,
"pub_date": "2019-08-24T14:15:22Z"
}
```
#### Получение списка всех комментариев к отзыву. GET запрос
- Получить список всех комментариев к отзыву по id
- Права доступа: Доступно без токена.
```
http://127.0.0.1:8000/api/v1/titles/{title_id}/reviews/{review_id}/comments/
```
```
[
{
"count": 0,
"next": "string",
"previous": "string",
"results": []
}
]
```
#### Добавление комментария к отзыву
- Добавить новый комментарий для отзыва.
- Права доступа: Аутентифицированные пользователи.
```
http://127.0.0.1:8000/api/v1/titles/{title_id}/reviews/{review_id}/comments/
```
##### Пример запроса:
```
{
"text": "string"
}
```
##### Пример ответа:
```
{
"id": 0,
"text": "string",
"author": "string",
"pub_date": "2019-08-24T14:15:22Z"
}
```
#### Это лишь малая часть возможных примеров запросов. Полный список возможных запросов к Апишке можно посмотреть вот по этому адресу:
```
http://127.0.0.1:8000/redoc/
```

**Команда #23:**  
:steam_locomotive:[**Даур Павликов**](https://github.com/Koloyojik)  
:railway_car:[**Иванов Илья**](https://github.com/bigfuto)  
:railway_car:[**Егор Дубихин**](https://github.com/Kot9lpa99)  


